{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Action Receipt Schema",
  "description": "Standard schema for proving that an AI agent took an action. If an agent cannot produce this, it did not act.",
  "version": "1.0.0",
  "type": "object",
  "required": [
    "action_id",
    "tool_name",
    "timestamp",
    "status",
    "input_hash",
    "output_hash"
  ],
  "properties": {
    "action_id": {
      "type": "string",
      "description": "Unique identifier for this action (UUID recommended)",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "examples": [
        "act_7f3b9c2d",
        "550e8400-e29b-41d4-a716-446655440000"
      ]
    },
    "tool_name": {
      "type": "string",
      "description": "Name of the tool that was invoked",
      "examples": [
        "email_sender",
        "calendar_scheduler",
        "database_writer",
        "file_manager"
      ]
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO-8601 timestamp of when the action occurred",
      "examples": [
        "2025-12-31T14:30:00Z",
        "2025-12-31T14:30:00.123Z"
      ]
    },
    "status": {
      "type": "string",
      "enum": ["success", "failed"],
      "description": "Whether the tool invocation succeeded or failed"
    },
    "input_hash": {
      "type": "string",
      "pattern": "^sha256:[a-f0-9]{64}$",
      "description": "SHA256 hash of the tool input (proves what was sent)",
      "examples": [
        "sha256:abc123def456789012345678901234567890123456789012345678901234"
      ]
    },
    "output_hash": {
      "type": "string",
      "pattern": "^sha256:[a-f0-9]{64}$",
      "description": "SHA256 hash of the tool output (proves what was received)",
      "examples": [
        "sha256:def456abc789012345678901234567890123456789012345678901234567"
      ]
    },
    "trace_id": {
      "type": "string",
      "description": "Optional trace ID linking this action to a broader trace",
      "examples": [
        "trace_abc123",
        "req_7f3b9c2d"
      ]
    },
    "latency_ms": {
      "type": "integer",
      "minimum": 0,
      "description": "Optional latency in milliseconds for performance tracking",
      "examples": [245, 1024]
    },
    "error_message": {
      "type": "string",
      "description": "Optional error message if status is 'failed'",
      "examples": [
        "Connection timeout",
        "Invalid credentials",
        "Rate limit exceeded"
      ]
    },
    "metadata": {
      "type": "object",
      "description": "Optional additional metadata about the action",
      "additionalProperties": true
    }
  },
  "examples": [
    {
      "action_id": "act_7f3b9c2d",
      "tool_name": "email_sender",
      "timestamp": "2025-12-31T14:30:00Z",
      "status": "success",
      "input_hash": "sha256:abc123def456789012345678901234567890123456789012345678901234",
      "output_hash": "sha256:def456abc789012345678901234567890123456789012345678901234567",
      "trace_id": "trace_abc123",
      "latency_ms": 245
    },
    {
      "action_id": "act_8g4c0e3f",
      "tool_name": "database_writer",
      "timestamp": "2025-12-31T14:31:15Z",
      "status": "failed",
      "input_hash": "sha256:789abc012345678901234567890123456789012345678901234567890123",
      "output_hash": "sha256:012345678901234567890123456789012345678901234567890123456789",
      "trace_id": "trace_abc123",
      "latency_ms": 1024,
      "error_message": "Connection timeout"
    }
  ],
  "additionalProperties": false
}
